/*C2*/SET SCHEMA PUBLIC
CREATE TABLE DEPT (\u000a\u0009ID INTEGER NOT NULL PRIMARY KEY,\u000a\u0009DEPT_NAME VARCHAR(50)\u000a)
CREATE TABLE SALARY_HIST (\u000a\u0009ID INTEGER IDENTITY PRIMARY KEY,\u000a\u0009DATE_TIME TIMESTAMP DEFAULT NOW, \u000a\u0009FROM_SALARY DOUBLE NOT NULL,\u000a\u0009TO_SALARY DOUBLE NOT NULL\u000a)
ALTER TABLE SALARY_HIST ADD EMP_ID INTEGER NOT NULL
CREATE TRIGGER EMPLOUEE_AFT_UPD AFTER UPDATE ON EMPLOYEE \u000a   REFERENCING \u000a\u0009NEW ROW AS new\u000a\u0009OLD ROW AS old\u000a   FOR EACH ROW WHEN (old.salary <> new.salary)\u000a   INSERT INTO SALARY_HIST (FROM_SALARY, TO_SALARY, EMP_ID)\u000a   VALUES (old.salary, new.SALARY, new.id)
DELETE FROM EMPLOYEE WHERE ID=1
INSERT INTO EMPLOYEE VALUES(1,'PATRICK',1000.0E0)
INSERT INTO SALARY_HIST VALUES(0,'2018-10-26 15:48:22.901000',100.0E0,1000.0E0,1)
COMMIT
